<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Travel Space - Report Your Capacity</title>
    <style>
        div {
            background-color: rgba(6, 71, 137, 1);
        }
        #buttonsDiv {
            background-color: lightgrey;
        }
        .signup {
            padding: 20px;
        }
        #bus {
            max-width: 100%;
            max-height: 100%;
        }
        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 700px;
            height: 500px;
        }
        .reportingButtons{
            display: block;
            width: 70%;
            margin-left: auto;
            margin-right: auto;
            font-size: 30px;
            cursor: pointer;
        }
        #buttonsDiv{
            border: solid black;
            border-width: 5px;
            margin: auto;
            width: 600px;
            padding: 50px;
        }
        #travelSpaceHeader{
            text-align: right;
            font-size: 40px;
            text-decoration: none;
            color: black;
        }
    </style>
    
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBRhEm0WFOVmSqcRx80650G7KhE1q58o5A",
    authDomain: "travel-space-9f0a2.firebaseapp.com",
    databaseURL: "https://travel-space-9f0a2.firebaseio.com",
    projectId: "travel-space-9f0a2",
    storageBucket: "travel-space-9f0a2.appspot.com",
    messagingSenderId: "738064646445"
  };
  firebase.initializeApp(config);
</script>
</head>
<body style="background-color: linen;">
    <div>
        <table style="width:100%">
            <tr>
                <td width="1%"><br></td>
                <td class="signup" rowspan="2" style="color: rgba(251, 252, 255, 1);"><p><b><i>Log-in</i></b></p></td>
                <td width="19%"><br></td>
                <td class="signup" rowspan="2" id="travelSpaceHeader"><b><a href="index.html" id="travelSpaceHeader" style="color: rgba(251, 252, 255, 1);">Travel Space</a></b></td>
                <td style="text-align: right; color: rgba(251, 252, 255, 1);"><b>Join Now</b><br>Receive credits for reporting crowdedness!</td>
                <td><a href="rewards.html"><img src="image/reward_sign.png" width="65" height="65" alt="reward sign"></a></td>
            </tr>
        </table>
    </div>
    <br>
    <br>
    <h2 style="text-align: center; color: rgba(96, 88, 86, 1);">Make Your Report Here!</h2>
    <br>
    <h2 style="text-align: center; color: rgba(96, 88, 86, 1);">How Crowded is Your Bus/Skytrain?</h2>
    <br>
    <div id="buttonsDiv">
    <button class="reportingButtons" id="veryCrowdedButton">Very Crowded</button>
    <br>
    <button class="reportingButtons" id="crowdedButton">Crowded</button>
    <br>
    <button class="reportingButtons" id="okayButton">Okay</button>
    <br>
    <button class="reportingButtons" id="roomyButton">Roomy</button>
    <br>
    <button class="reportingButtons" id="veryRoomyButton">Very Roomy</button>
    </div>
    <br>
    <br>
    <img id="bus" src="image/bus_sky.jpg" width="1250" height="300" alt="bus and skytrain">
    <br>
    <br>
    <div style="position: absolute; width: 100%; height: 80px; bottom: auto;; color: gray">
    <p></p>
    </div>

    <script>
    localStorage.setItem("isReported", false);
    var station = localStorage.getItem("stationName")
    function changeToVeryCrowdedImage(){
        let reportTime = new Date()
        localStorage.setItem('isReported', 'true');
        var promise = firebase.database().ref("report/" + station).set({
            reportImage: "status5.png", reportTime: reportTime.toString()
        });
        promise.then(function() {
            window.location.href="search_result.html";
        })
    }
    function changeToCrowdedImage(){
        let reportTime = new Date()
        localStorage.setItem("isReported", "true");
        var promise = firebase.database().ref("report/" + station).set({
            reportImage: "status4.png", reportTime: reportTime.toString()
        });
        promise.then(function() {
            window.location.href="search_result.html";
        })
    }
    function changeToOkayImage(){
        let reportTime = new Date()
        localStorage.setItem("isReported", "true");
        var promise = firebase.database().ref("report/" + station).set({
            reportImage: "status3.png", reportTime: reportTime.toString()
        });
        promise.then(function() {
            window.location.href="search_result.html";
        })
    }
    function changeToRoomyImage(){
        let reportTime = new Date()
        localStorage.setItem("isReported", "true");
        var promise = firebase.database().ref("report/" + station).set({
            reportImage: "status2.png", reportTime: reportTime.toString()
        });
        promise.then(function() {
            window.location.href="search_result.html";
        })
    }
    function changeToVeryRoomyImage(){
        let reportTime = new Date()
        localStorage.setItem("isReported", "true");
        var promise = firebase.database().ref("report/" + station).set({
            reportImage: "status1.png", reportTime: reportTime.toString()
        });
        promise.then(function() {
            window.location.href="search_result.html";
        })
    }
    document.getElementById("veryCrowdedButton").onclick = changeToVeryCrowdedImage;
    document.getElementById("crowdedButton").onclick = changeToCrowdedImage;
    document.getElementById("okayButton").onclick = changeToOkayImage;
    document.getElementById("roomyButton").onclick = changeToRoomyImage;
    document.getElementById("veryRoomyButton").onclick = changeToVeryRoomyImage;
    </script>
</body>
</html>